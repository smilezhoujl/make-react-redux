{"ast":null,"code":"import _objectSpread from \"/Users/jilin.zhou/Desktop/reactProj/make_react_redux/make-react-redux/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/Users/jilin.zhou/Desktop/reactProj/make_react_redux/make-react-redux/src/react-redux.js\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nexport const connect = (mapStateToProps, mapDispatchToProps) => WrappedComponent => {\n  class Connect extends Component {\n    // get store from context\n    constructor() {\n      super();\n      this.state = {\n        allProps: {}\n      };\n    }\n\n    componentWillMount() {\n      const store = this.context.store;\n\n      this._updateProps();\n\n      store.subscribe(() => this._updateProps());\n    }\n\n    _updateProps() {\n      const store = this.context.store;\n      let stateProps = mapStateToProps ? mapStateToProps(store.getState(), this.props) : {};\n      let dispatchProps = mapDispatchToProps ? mapDispatchToProps(store.dispatch, this.props) : {};\n      this.setState({\n        allProps: _objectSpread({}, stateProps, dispatchProps, this.props)\n      });\n    }\n\n    render() {\n      return React.createElement(WrappedComponent, Object.assign({}, this.state.allProps, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 36\n        },\n        __self: this\n      }));\n    }\n\n  }\n\n  Connect.contextTypes = {\n    store: PropTypes.object\n  };\n  return Connect;\n}; // defined Provider , root context delegate \n\nexport class Provider extends Component {\n  // define prop data type\n  getChildContext() {\n    return {\n      store: this.props.store\n    };\n  }\n\n}\nProvider.propTypes = {\n  store: PropTypes.object,\n  children: PropTypes.any\n};\nProvider.childContextTypes = {\n  store: PropTypes.object\n};","map":{"version":3,"sources":["/Users/jilin.zhou/Desktop/reactProj/make_react_redux/make-react-redux/src/react-redux.js"],"names":["React","Component","PropTypes","connect","mapStateToProps","mapDispatchToProps","WrappedComponent","Connect","constructor","state","allProps","componentWillMount","store","context","_updateProps","subscribe","stateProps","getState","props","dispatchProps","dispatch","setState","render","contextTypes","object","Provider","getChildContext","propTypes","children","any","childContextTypes"],"mappings":";;AAAA,OAAOA,KAAP,IAAiBC,SAAjB,QAAkC,OAAlC;AACA,OAAOC,SAAP,MAAsB,YAAtB;AAEA,OAAO,MAAMC,OAAO,GAAG,CAACC,eAAD,EAAmBC,kBAAnB,KAA2CC,gBAAD,IAAsB;AACnF,QAAMC,OAAN,SAAsBN,SAAtB,CAAgC;AAC5B;AAKAO,IAAAA,WAAW,GAAE;AACT;AACA,WAAKC,KAAL,GAAa;AAAEC,QAAAA,QAAQ,EAAG;AAAb,OAAb;AACH;;AAEDC,IAAAA,kBAAkB,GAAE;AAAA,YACRC,KADQ,GACE,KAAKC,OADP,CACRD,KADQ;;AAEhB,WAAKE,YAAL;;AACAF,MAAAA,KAAK,CAACG,SAAN,CAAgB,MAAM,KAAKD,YAAL,EAAtB;AACH;;AAEDA,IAAAA,YAAY,GAAE;AAAA,YACFF,KADE,GACQ,KAAKC,OADb,CACFD,KADE;AAEV,UAAII,UAAU,GAAGZ,eAAe,GAAGA,eAAe,CAACQ,KAAK,CAACK,QAAN,EAAD,EAAmB,KAAKC,KAAxB,CAAlB,GAAmD,EAAnF;AACA,UAAIC,aAAa,GAAGd,kBAAkB,GAAGA,kBAAkB,CAACO,KAAK,CAACQ,QAAP,EAAkB,KAAKF,KAAvB,CAArB,GAAqD,EAA3F;AACA,WAAKG,QAAL,CAAc;AACVX,QAAAA,QAAQ,oBACDM,UADC,EAEDG,aAFC,EAGD,KAAKD,KAHJ;AADE,OAAd;AAOH;;AAEDI,IAAAA,MAAM,GAAE;AACJ,aAAO,oBAAC,gBAAD,oBAAuB,KAAKb,KAAL,CAAWC,QAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAP;AACH;;AAhC2B;;AAA1BH,EAAAA,OAD6E,CAGxEgB,YAHwE,GAGzD;AAClBX,IAAAA,KAAK,EAAGV,SAAS,CAACsB;AADA,GAHyD;AAoCnF,SAAOjB,OAAP;AACH,CArCM,C,CAuCP;;AACA,OAAO,MAAMkB,QAAN,SAAuBxB,SAAvB,CAAiC;AACpC;AAUAyB,EAAAA,eAAe,GAAG;AACd,WAAO;AACHd,MAAAA,KAAK,EAAG,KAAKM,KAAL,CAAWN;AADhB,KAAP;AAGH;;AAfmC;AAA3Ba,Q,CAEFE,S,GAAY;AACff,EAAAA,KAAK,EAAGV,SAAS,CAACsB,MADH;AAEfI,EAAAA,QAAQ,EAAG1B,SAAS,CAAC2B;AAFN,C;AAFVJ,Q,CAOFK,iB,GAAoB;AACvBlB,EAAAA,KAAK,EAAGV,SAAS,CAACsB;AADK,C","sourcesContent":["import React , { Component } from 'react'\nimport PropTypes from 'prop-types'\n\nexport const connect = (mapStateToProps , mapDispatchToProps) => (WrappedComponent) => {\n    class Connect extends Component {\n        // get store from context\n        static contextTypes = {\n            store : PropTypes.object\n        }\n\n        constructor(){\n            super()\n            this.state = { allProps : {} }\n        }\n\n        componentWillMount(){\n            const { store } = this.context\n            this._updateProps()\n            store.subscribe(() => this._updateProps())\n        }\n\n        _updateProps(){\n            const { store } = this.context\n            let stateProps = mapStateToProps ? mapStateToProps(store.getState(), this.props) : {}\n            let dispatchProps = mapDispatchToProps ? mapDispatchToProps(store.dispatch , this.props) : {}\n            this.setState({\n                allProps : {\n                    ...stateProps ,\n                    ...dispatchProps ,\n                    ...this.props\n                }\n            })\n        }\n\n        render(){\n            return <WrappedComponent { ...this.state.allProps } />\n        }\n    }\n\n    return Connect\n}\n\n// defined Provider , root context delegate \nexport class Provider extends Component {\n    // define prop data type\n    static propTypes = {\n        store : PropTypes.object ,\n        children : PropTypes.any\n    }\n\n    static childContextTypes = {\n        store : PropTypes.object\n    }\n\n    getChildContext() {\n        return {\n            store : this.props.store\n        }\n    }\n\n    \n}"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _objectSpread from \"/Users/jilin.zhou/Desktop/reactProj/make_react_redux/make-react-redux/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/Users/jilin.zhou/Desktop/reactProj/make_react_redux/make-react-redux/src/react-redux.js\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nexport const connect = mapStateToProps => WrappedComponent => {\n  class Connect extends Component {\n    // get store from context\n    constructor() {\n      super();\n      this.state = {\n        allProps: {}\n      };\n    }\n\n    componentWillMount() {\n      const store = this.context.store;\n\n      this._updateProps();\n\n      store.subscribe(() => this._updateProps());\n    }\n\n    _updateProps() {\n      const store = this.context.store;\n      let stateProps = mapStateToProps(store.getState(), this.props);\n      this.setState({\n        allProps: _objectSpread({}, stateProps, this.props)\n      });\n    }\n\n    render() {\n      return React.createElement(WrappedComponent, Object.assign({}, this.state.allProps, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 34\n        },\n        __self: this\n      }));\n    }\n\n  }\n\n  Connect.contextTypes = {\n    store: PropTypes.object\n  };\n  return Connect;\n};","map":{"version":3,"sources":["/Users/jilin.zhou/Desktop/reactProj/make_react_redux/make-react-redux/src/react-redux.js"],"names":["React","Component","PropTypes","connect","mapStateToProps","WrappedComponent","Connect","constructor","state","allProps","componentWillMount","store","context","_updateProps","subscribe","stateProps","getState","props","setState","render","contextTypes","object"],"mappings":";;AAAA,OAAOA,KAAP,IAAiBC,SAAjB,QAAkC,OAAlC;AACA,OAAOC,SAAP,MAAsB,YAAtB;AAEA,OAAO,MAAMC,OAAO,GAAIC,eAAD,IAAsBC,gBAAD,IAAsB;AAC9D,QAAMC,OAAN,SAAsBL,SAAtB,CAAgC;AAC5B;AAKAM,IAAAA,WAAW,GAAE;AACT;AACA,WAAKC,KAAL,GAAa;AAAEC,QAAAA,QAAQ,EAAG;AAAb,OAAb;AACH;;AAEDC,IAAAA,kBAAkB,GAAE;AAAA,YACRC,KADQ,GACE,KAAKC,OADP,CACRD,KADQ;;AAEhB,WAAKE,YAAL;;AACAF,MAAAA,KAAK,CAACG,SAAN,CAAgB,MAAM,KAAKD,YAAL,EAAtB;AACH;;AAEDA,IAAAA,YAAY,GAAE;AAAA,YACFF,KADE,GACQ,KAAKC,OADb,CACFD,KADE;AAEV,UAAII,UAAU,GAAGX,eAAe,CAACO,KAAK,CAACK,QAAN,EAAD,EAAmB,KAAKC,KAAxB,CAAhC;AACA,WAAKC,QAAL,CAAc;AACVT,QAAAA,QAAQ,oBACDM,UADC,EAED,KAAKE,KAFJ;AADE,OAAd;AAMH;;AAEDE,IAAAA,MAAM,GAAE;AACJ,aAAO,oBAAC,gBAAD,oBAAuB,KAAKX,KAAL,CAAWC,QAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAP;AACH;;AA9B2B;;AAA1BH,EAAAA,OADwD,CAGnDc,YAHmD,GAGpC;AAClBT,IAAAA,KAAK,EAAGT,SAAS,CAACmB;AADA,GAHoC;AAkC9D,SAAOf,OAAP;AACH,CAnCM","sourcesContent":["import React , { Component } from 'react'\nimport PropTypes from 'prop-types'\n\nexport const connect = (mapStateToProps) => (WrappedComponent) => {\n    class Connect extends Component {\n        // get store from context\n        static contextTypes = {\n            store : PropTypes.object\n        }\n\n        constructor(){\n            super()\n            this.state = { allProps : {} }\n        }\n\n        componentWillMount(){\n            const { store } = this.context\n            this._updateProps()\n            store.subscribe(() => this._updateProps())\n        }\n\n        _updateProps(){\n            const { store } = this.context\n            let stateProps = mapStateToProps(store.getState(), this.props)\n            this.setState({\n                allProps : {\n                    ...stateProps ,\n                    ...this.props\n                }\n            })\n        }\n\n        render(){\n            return <WrappedComponent { ...this.state.allProps } />\n        }\n    }\n\n    return Connect\n}"]},"metadata":{},"sourceType":"module"}